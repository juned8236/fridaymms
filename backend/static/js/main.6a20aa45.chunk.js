(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{24:function(e,a,t){e.exports=t.p+"static/media/logo.f8918331.png"},31:function(e,a,t){},44:function(e,a,t){e.exports=t(77)},49:function(e,a,t){},50:function(e,a,t){},51:function(e,a,t){},52:function(e,a,t){},57:function(e,a,t){},58:function(e,a,t){},77:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(22),l=t.n(s),o=(t(49),t(50),t(51),t(52),t(11)),i=t(12),c=t(14),m=t(13),u=t(18),d=t(2),p=t(8),h=t(20),b=t(6),f=t(15);t(57),t(31);var g=function(){var e=this.props,a=e.label,t=e.type,n=e.id,s=e.val,l=e.className,o=e.placeholder,i=e.password1,c=e.password2;return e.span,r.a.createElement("div",{className:"w-100"},r.a.createElement("label",null,a),r.a.createElement("input",{id:n,type:t,value:s,className:l,password1:i,password2:c,onChange:this.fnChange.bind(this),placeholder:o,name:""}))},E=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"fnChange",value:function(e){var a=e.target,t=a.id,n=a.value;this.props.fnPrepareData(t,n)}},{key:"render",value:function(){return g.call(this)}}]),t}(r.a.Component),v=t(88),O=t(24),N=t.n(O);t(58);var j=function(){return r.a.createElement("div",{className:"dashboard"},r.a.createElement("button",{type:"submit",className:"btn btn-green btn-block",onClick:this.submit.bind(this)},"Logout"))},w=t(26),_=t.n(w),y=function(){return console.log("start"),{type:"AUTH_START"}},k=function(e){return console.log("sucess"),{type:"AUTH_SUCCESS",token:e}},A=function(){return console.log("logout"),localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),{type:"AUTH_LOGOUT"}},D=function(e){return console.log("authchecktime"),function(a){setTimeout((function(){a(A())}),1e3*e)}},P=function(e,a){return function(t){t(y()),_.a.post("http://localhost:1337/rest-auth/login/",{email:e,password:a}).then((function(e){var a=e.data.key,n=new Date((new Date).getTime()+36e5);localStorage.setItem("token",a),localStorage.setItem("expirationDate",n),t(k(a)),t(D(3600))})).catch((function(e){var a;t((a=e,console.log("fail"),{type:"AUTH_FAIL",error:a}))}))}},S=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).submit=function(){e.props.logout()},e}return Object(i.a)(t,[{key:"render",value:function(){return j.call(this)}}]),t}(r.a.Component),x=Object(p.b)((function(e){return{token:e.token,isAuthenticated:e.isAuthenticated}}),(function(e){return{logout:function(){return e(A())}}}))(S);var C=function(){var e=this.state.dataObj,a=e.email,t=e.password,n=null,s=null,l=null;return this.props.error&&(n=r.a.createElement("p",null,this.props.error.response.data.non_field_errors),s=r.a.createElement("span",null,this.props.error.response.data.password),l=r.a.createElement("span",null,this.props.error.response.data.email)),this.props.isAuthenticated?(console.log("isAuthenticated"),r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,null,r.a.createElement(d.b,{exact:!0,path:"/dashboard",component:x}),r.a.createElement(d.a,{to:"/dashboard"})))):r.a.createElement("div",{className:"root-login"},this.props.loading?r.a.createElement(v.a,{color:"secondary"}):r.a.createElement("div",{className:"admin-entry-section"},r.a.createElement("div",{className:"inner-admin"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-12 col-md-6 p-0 animated slideInRight"},r.a.createElement("div",{className:"inner-section"},r.a.createElement("img",{src:N.a,className:"logo",alt:""}),r.a.createElement("div",{className:"message-conntainer"},r.a.createElement("h2",{className:"text-center"},"Welcome back!"),r.a.createElement("h4",{className:"text-center"},"Please sign in to continue.")),r.a.createElement("p",null,"Don't have an account? ",r.a.createElement(u.b,{to:"/signup"},"Create an account")))),r.a.createElement("div",{className:"col-12 col-md-6 p-0 animated slideInLeft"},r.a.createElement("div",{className:"form-section"},r.a.createElement("h2",null,"Sign in"),r.a.createElement("form",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-group required-alert-box"},r.a.createElement(E,{label:"Email Address",type:"text",className:"form-control",id:"email",val:a,required:!0,placeholder:"Email Address",fnPrepareData:this.fnPrepareData}),l)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-group required-alert-box"},r.a.createElement(E,{label:"Password",type:"password",className:"form-control",id:"password",val:t,required:!0,placeholder:"Password",fnPrepareData:this.fnPrepareData}),s))),r.a.createElement("div",{className:"form-group mb-4"},r.a.createElement("div",{className:"row mx-0 justify-content-between align-items-center"},r.a.createElement("span",{className:"checkbox-custom"},r.a.createElement("input",{type:"checkbox",name:"",id:"remember"}),r.a.createElement("label",{htmlFor:"remember"},"Remember me")),r.a.createElement("a",{href:"/password-reset/"},"Forgot password?"))),r.a.createElement("div",{className:"form-group mb-3"},r.a.createElement("button",{type:"submit",className:"btn btn-green btn-block",onClick:this.submit.bind(this)},"Sign In"))))))))),this.props&&this.props.error&&this.props.error.response&&this.props.error.response.data.non_field_errors&&r.a.createElement("div",{className:"window-message animated fadeOutRight alert alert-danger"},r.a.createElement("h3",null,"Error"),r.a.createElement("p",null,n)))},T=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){var e;return Object(o.a)(this,t),(e=a.call(this)).refresh=function(){window.location.reload()},e.state={dataObj:{email:"",password:""}},e.submit=e.submit.bind(Object(f.a)(e)),e.fnPrepareData=e.fnPrepareData.bind(Object(f.a)(e)),e}return Object(i.a)(t,[{key:"fnPrepareData",value:function(e,a){this.setState({dataObj:Object(b.a)(Object(b.a)({},this.state.dataObj),{},Object(h.a)({},e,a))})}},{key:"submit",value:function(){this.props.onAuth(this.state.dataObj.email,this.state.dataObj.password)}},{key:"componentDidUpdate",value:function(e,a){a.error!==this.state.error&&this.refresh()}},{key:"render",value:function(){return C.call(this)}}]),t}(r.a.Component),I=Object(p.b)((function(e){return{loading:e.loading,error:e.error,token:e.token,isAuthenticated:e.isAuthenticated}}),(function(e){return{onAuth:function(a,t){return e(P(a,t))}}}))(T);var U=function(){var e=this.state.dataObj,a=e.first_name,t=e.last_name,n=e.email,s=e.password1,l=e.password2,o=null,i=null,c=null;return this.props.regis&&(i=r.a.createElement("span",null,this.props.regis.response.data.first_name),c=r.a.createElement("span",null,this.props.regis.response.data.last_name),o=r.a.createElement("span",null,this.props.regis.response.data.email)),r.a.createElement("div",{className:"body-container"},this.props.loading?r.a.createElement(v.a,{color:"secondary"}):r.a.createElement("div",{className:"admin-entry-section"},r.a.createElement("div",{className:"inner-admin"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-12 col-md-6 p-0 order-md-12 animated slideInLeft"},r.a.createElement("div",{className:"inner-section register-section"},r.a.createElement("img",{src:N.a,className:"logo",alt:""}),r.a.createElement("div",{className:"message-conntainer"},r.a.createElement("h2",{className:"text-center"},"Get started"),r.a.createElement("h4",{className:"text-center"},"It's free to signup and only takes a minute.")),r.a.createElement("p",null,"You have an account? ",r.a.createElement(u.b,{to:"/"},"Sign In")))),r.a.createElement("div",{className:"col-12 col-md-6 p-0 animated slideInRight"},r.a.createElement("div",{className:"form-section"},r.a.createElement("h2",null,"Sign up"),r.a.createElement("form",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-6"},r.a.createElement("div",{className:"form-group required-alert-box"},r.a.createElement(E,{label:"First name",type:"text",className:"form-control",id:"first_name",val:a,placeholder:"First name",fnPrepareData:this.fnPrepareData}),r.a.createElement("span",null,i))),r.a.createElement("div",{className:"col-12 col-sm-6"},r.a.createElement("div",{className:"form-group required-alert-box"},r.a.createElement(E,{label:"Last name",type:"text",className:"form-control",id:"last_name",val:t,placeholder:"Last name",fnPrepareData:this.fnPrepareData}),r.a.createElement("span",null,c))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-group required-alert-box"},r.a.createElement(E,{label:"Email Address",type:"text",className:"form-control",id:"email",val:n,placeholder:"Email Address",fnPrepareData:this.fnPrepareData}),r.a.createElement("span",null,o))),r.a.createElement("div",{className:"col-12 col-sm-6"},r.a.createElement("div",{className:"form-group required-alert-box h-auto mb-0"},r.a.createElement(E,{label:"Password",type:"Password",className:"form-control",id:"password1",val:s,placeholder:"Password",fnPrepareData:this.fnPrepareData}))),r.a.createElement("div",{className:"col-12 col-sm-6"},r.a.createElement("div",{className:"form-group required-alert-box h-auto mb-0"},r.a.createElement(E,{label:"Confirm Password",type:"Password",className:"form-control",id:"password2",val:l,placeholder:"Confirm Password",fnPrepareData:this.fnPrepareData}))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-group required-alert-box h-auto"},this.props&&this.props.regis&&this.props.regis.response.data&&this.props.regis.response.data.password1&&r.a.createElement("span",null,this.props.regis.response.data.password1),this.props&&this.props.regis&&this.props.regis.response.data&&this.props.regis.response.data.non_field_errors&&r.a.createElement("span",null,this.props.regis.response.data.non_field_errors)))),r.a.createElement("div",{className:"form-group required-alert-box"},r.a.createElement("label",null,"Role"),r.a.createElement("select",{className:"form-control",onChange:this.handleChange},r.a.createElement("option",{value:""},"Select role"),r.a.createElement("option",{value:"True"},"Miner"),r.a.createElement("option",{value:"True"},"Read Only"))),r.a.createElement("div",{className:"form-group mb-3"},r.a.createElement("button",{type:"submit",className:"btn btn-green btn-block",onClick:this.submit.bind(this)},"Sign Up"))))))))),this.props&&this.props.email_link&&this.props.email_link.detail&&r.a.createElement("div",{className:"window-message alert alert-success"},r.a.createElement("h3",null,"Thanks for Registration"),r.a.createElement("p",null,this.props.email_link.detail+": Click on that link to activate Account")))},q=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){var e;return Object(o.a)(this,t),(e=a.call(this)).handleChange=function(a){"is_miner"===a.target.value&&e.setState({dataObj:Object(b.a)(Object(b.a)({},e.state.dataObj),{},{is_miner:a.target.value})}),"read_only"===a.target.value&&e.setState({dataObj:Object(b.a)(Object(b.a)({},e.state.dataObj),{},{read_only:a.target.value})})},e.state={dataObj:{first_name:"",last_name:"",email:"",password1:"",password2:"",is_miner:"False",read_only:"False",is_admin:"False"}},e.toggle=e.toggle.bind(Object(f.a)(e)),e.fnPrepareData=e.fnPrepareData.bind(Object(f.a)(e)),e.submit=e.submit.bind(Object(f.a)(e)),e.handleChange=e.handleChange.bind(Object(f.a)(e)),e}return Object(i.a)(t,[{key:"toggle",value:function(){this.props.app(!1)}},{key:"fnPrepareData",value:function(e,a){this.setState({dataObj:Object(b.a)(Object(b.a)({},this.state.dataObj),{},Object(h.a)({},e,a))})}},{key:"submit",value:function(){this.props.onAuth(this.state.dataObj.first_name,this.state.dataObj.last_name,this.state.dataObj.email,this.state.dataObj.password1,this.state.dataObj.password2,this.state.dataObj.is_miner,this.state.dataObj.read_only,this.state.dataObj.is_admin)}},{key:"render",value:function(){return U.call(this)}}]),t}(r.a.Component),F=Object(p.b)((function(e){return{loading:e.loading,error:e.error,regis:e.regis,email_link:e.email_link}}),(function(e){return{onAuth:function(a,t,n,r,s,l,o,i){return e(function(e,a,t,n,r,s,l,o){return function(i){i(y()),_.a.post("http://localhost:1337/rest-auth/registration/",{first_name:e,last_name:a,email:t,password1:n,password2:r,is_miner:s,read_only:o,is_admin:l}).then((function(e){var a=e.data;i(function(e){return{type:"registration",email_link:e}}(a))})).catch((function(e){i({type:"reg_error",regis:e})}))}}(a,t,n,r,s,o,i,l))}}}))(q),L=Object(p.b)((function(e){return{isAuthenticated:e.isAuthenticated}}))((function(){return r.a.createElement("div",null,r.a.createElement(d.b,{exact:!0,path:"/signup/",component:F}),r.a.createElement(d.b,{exact:!0,path:"/",component:I}),r.a.createElement(d.b,{exact:!0,path:"/dashboard",component:x}))})),R=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(L,null)))}}]),t}(n.Component),H=Object(p.b)(null,(function(e){return{onTryAutoSignup:function(){return e((console.log("authcheck"),function(e){var a=localStorage.getItem("token");if(void 0===a)e(A());else{var t=new Date(localStorage.getItem("expirationDate"));t<=new Date?e(A()):(e(k(a)),e(D((t.getTime()-(new Date).getTime())/1e3)))}}))}}}))(R);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=t(21),G=t(41),W=function(e,a){return Object(b.a)(Object(b.a)({},e),a)},B={token:null,error:null,loading:!1,regis:null,email_link:null,isAuthenticated:!1},J=function(e,a){return W(e,{error:null,loading:!0})},X=function(e,a){return W(e,{token:a.token,error:null,loading:!1,isAuthenticated:!0})},V=function(e,a){return W(e,{error:a.error,loading:!1})},Y=function(e,a){return W(e,{token:null})},$=function(e,a){return W(e,{email_link:a.email_link,error:null,loading:!1})},z=function(e,a){return W(e,{regis:a.regis,loading:!1})},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"AUTH_START":return J(e);case"AUTH_SUCCESS":return X(e,a);case"AUTH_FAIL":return V(e,a);case"AUTH_LOGOUT":return Y(e);case"registration":return $(e,a);case"reg_error":return z(e,a);default:return e}},Q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||M.c,Z=Object(M.d)(K,Q(Object(M.a)(G.a)));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,{store:Z},r.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.6a20aa45.chunk.js.map